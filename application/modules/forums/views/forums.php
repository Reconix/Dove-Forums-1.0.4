<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');/**** Forums View ** @author			Chris Baines* @package			Dove Forums* @copyright		ï¿½ 2010 - 2011 Dove Forums* @last modified	31/01/2011**/?><h1>{category}</h1>	<div class="page_list">	<ul class="topics">            <div class="general">                <div class="general_inner_border">                    <strong>Order:</strong>&nbsp;&nbsp<?php echo anchor('forums/update_order/asc', $this->lang->line('discussionsAscending'), 'title="'.$this->lang->line('discussionsSortAscending').'"'); ?>&nbsp;&nbsp;|&nbsp;&nbsp;<?php echo anchor('forums/update_order/desc', $this->lang->line('discussionsDescending'), 'title="'.$this->lang->line('discussionsSortDescending').'"'); ?>                </div>            </div>    <?php    $counter = 1;	if (!$topics)	{		echo '<p>'.$this->lang->line('noDiscussions').'</p>';	}	else	{		foreach($topics as $row)		{			if($row['Sticky'] == '1')			{				$sticky = $this->lang->line('discussionsSticky');			}			else			{				$sticky = '';			}					if($row['Closed'] == '1')			{				$closed = $this->lang->line('discussionsClosed');			}			else			{				$closed = '';			}			$counter++;			$posts = $this->posts_m->get_latest_5_posts($row['TopicID']);			echo '            <li'; if($this->ion_auth->logged_in() && $this->ion_auth->is_admin() && $row['Flagged'] == '1'){ echo ' class="flagged"'; $counter=0;}elseif($row['Sticky'] == '1'){ echo ' class="sticky"'; $counter=0;} echo '>                <div'; if($row['Sticky'] == '1'){ echo ' class="topics_inner_border_sticky"';} elseif($row['Flagged'] == '1'){ echo ' class="topics_inner_border_flagged"';} else { echo ' class="topics_inner_border"'; } echo '>				    <div class="avatar">                        '.$this->users_m->build_avatar($row['email'], $row['username']).'                    </div>				    <div class="container">				        <h2>'.$sticky.''.$closed.' '.anchor('forums/posts/'.$row['CategoryID'].'/'.$row['TopicID'].'', ''.word_limiter($row['TopicName'], '5').'', 'title="'.$row['TopicName'].'"').'</h2>				        <div class="posted">'.$this->lang->line('byText').' '.anchor('forums/profile/'.$row['CreatedBy'].'', ''.$row['CreatedBy'].'', 'title="'.$row['CreatedBy'].''.$this->lang->line('profileText').'"').'                    </div>				</div>				<div class="commented">                    '.$this->lang->line('lastPostText').''.$this->lang->line('byText').' '.anchor('forums/profile/'.$row['LastPost'].'', ''.$row['LastPost'].'', 'title="'.$row['CreatedBy'].''.$this->lang->line('profileText').'"').'<br>                    '.$this->timeword->convert($row['LastPostTime'], time()).' '.$this->lang->line('agoText').'                </div>				<div class="bubble">                    '.$this->posts_m->count_posts($row['TopicID']).'                </div>                <div class="topic_icons">';                if($this->ion_auth->is_admin())                {                    echo ''.anchor('forums/delete_topic/'.$row['TopicID'].'', '<img src="'.base_url().'assets/images/delete_icon.png" height="15px" width="15px" title="'.$this->lang->line('discussionsDeleteTitle').'" />').'&nbsp;&nbsp;&nbsp;&nbsp;';                    echo ''.anchor('forums/edit_topic/'.$row['TopicID'].'', '<img src="'.base_url().'assets/images/edit_icon.png" height="15px" width="15px" title="'.$this->lang->line('discussionsEditTitle').'" />').'';                }                elseif($this->ion_auth->logged_in())                {                    if($this->ion_auth->is_group('members'))                    {                                            // Did the user create the topic ?                        if($row['CreatedBy'] == $this->session->userdata('username'))                        {                            if($deleteOwnDiscussions == '1')                            {                                echo ''.anchor('forums/delete_topic/'.$row['TopicID'].'', '<img src="'.base_url().'/assets/images/delete_icon.png" height="15px" width="15px" title="'.$this->lang->line('discussionsDeleteTitle').'" />').'&nbsp;&nbsp;&nbsp;&nbsp;';                            }                            if($editOwnDiscussions == '1')                            {                                echo ''.anchor('forums/edit_topic/'.$row['TopicID'].'', '<img src="'.base_url().'assets/images/edit_icon.png" height="15px" width="15px" title="'.$this->lang->line('discussionsEditTitle').'" />').'';                            }                        }                    }                    if($this->ion_auth->is_group('moderators'))                    {                        if($modsDeleteDiscussions == '1')                        {                            echo ''.anchor('forums/delete_topic/'.$row['TopicID'].'', '<img src="'.base_url().'/assets/images/delete_icon.png" height="15px" width="15px" title="'.$this->lang->line('discussionsDeleteTitle').'" />').'&nbsp;&nbsp;&nbsp;&nbsp;';                            }                        if($modsEditDiscussions == '1')                        {                            echo ''.anchor('forums/edit_topic/'.$row['TopicID'].'', '<img src="'.base_url().'assets/images/edit_icon.png" height="15px" width="15px" title="'.$this->lang->line('discussionsEditTitle').'" />').'';                            }                    }                }                echo '</div>			</li>';		}	}?></ul></div><div id="pagination">    <?php echo $links; ?></div>